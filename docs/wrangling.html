<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics</title>
  <meta name="description" content="Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics" />
  
  <meta name="twitter:description" content="Chapter 3 Data wrangling and descriptive statistics | R for social science and business analytics" />
  

<meta name="author" content="Raffaele Vacca" />


<meta name="date" content="2024-04-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Contents</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview and setup</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i><b>1.1</b> Workshop setup</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#materials"><i class="fa fa-check"></i><b>1.2</b> Workshop materials</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-settings"><i class="fa fa-check"></i><b>1.3</b> R settings</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.3.1</b> Required R packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#rstudio-options"><i class="fa fa-check"></i><b>1.3.2</b> RStudio options</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.4</b> Data</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#author-and-contacts"><i class="fa fa-check"></i><b>1.5</b> Author and contacts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#starting-R-and-loading-packages"><i class="fa fa-check"></i><b>2.1</b> Starting R and loading packages</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro.html"><a href="intro.html#console-vs-scripts"><i class="fa fa-check"></i><b>2.1.1</b> Console vs scripts</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>2.1.2</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#objects-in-r"><i class="fa fa-check"></i><b>2.2</b> Objects in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#the-workspace"><i class="fa fa-check"></i><b>2.2.1</b> The workspace</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro.html"><a href="intro.html#saving-and-removing-objects"><i class="fa fa-check"></i><b>2.2.2</b> Saving and removing objects</a></li>
<li class="chapter" data-level="2.2.3" data-path="intro.html"><a href="intro.html#vector-and-matrix-objects"><i class="fa fa-check"></i><b>2.2.3</b> Vector and matrix objects</a></li>
<li class="chapter" data-level="2.2.4" data-path="intro.html"><a href="intro.html#dataframes"><i class="fa fa-check"></i><b>2.2.4</b> Data frames</a></li>
<li class="chapter" data-level="2.2.5" data-path="intro.html"><a href="intro.html#lists"><i class="fa fa-check"></i><b>2.2.5</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#arithmetic-statistical-and-relational-operations"><i class="fa fa-check"></i><b>2.3</b> Arithmetic, statistical, and relational operations</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro.html"><a href="intro.html#arithmetic-operations-and-recycling"><i class="fa fa-check"></i><b>2.3.1</b> Arithmetic operations and recycling</a></li>
<li class="chapter" data-level="2.3.2" data-path="intro.html"><a href="intro.html#relational-operations-and-logical-vectors"><i class="fa fa-check"></i><b>2.3.2</b> Relational operations and logical vectors</a></li>
<li class="chapter" data-level="2.3.3" data-path="intro.html"><a href="intro.html#examples-of-arithmetic-and-statistical-functions"><i class="fa fa-check"></i><b>2.3.3</b> Examples of arithmetic and statistical functions</a></li>
<li class="chapter" data-level="2.3.4" data-path="intro.html"><a href="intro.html#missing-and-infinite-values"><i class="fa fa-check"></i><b>2.3.4</b> Missing and infinite values</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#subsetting"><i class="fa fa-check"></i><b>2.4</b> Subsetting</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#index-df"><i class="fa fa-check"></i><b>2.4.1</b> Subsetting data frames</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#pipes-and-the-operator"><i class="fa fa-check"></i><b>2.5</b> Pipes and the <code>|&gt;</code> operator</a></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#functions"><i class="fa fa-check"></i><b>2.6</b> Writing your own R functions</a></li>
<li class="chapter" data-level="2.7" data-path="intro.html"><a href="intro.html#types-and-classes-of-objects"><i class="fa fa-check"></i><b>2.7</b> Types and classes of objects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>3</b> Data wrangling and descriptive statistics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangling.html"><a href="wrangling.html#subsetting-and-renaming-variables"><i class="fa fa-check"></i><b>3.1</b> Subsetting and renaming variables</a></li>
<li class="chapter" data-level="3.2" data-path="wrangling.html"><a href="wrangling.html#recoding-cleaning-creating-variables"><i class="fa fa-check"></i><b>3.2</b> Recoding, cleaning, creating variables</a></li>
<li class="chapter" data-level="3.3" data-path="wrangling.html"><a href="wrangling.html#filtering-and-rearranging-cases"><i class="fa fa-check"></i><b>3.3</b> Filtering and rearranging cases</a></li>
<li class="chapter" data-level="3.4" data-path="wrangling.html"><a href="wrangling.html#saving-the-data"><i class="fa fa-check"></i><b>3.4</b> Saving the data</a></li>
<li class="chapter" data-level="3.5" data-path="wrangling.html"><a href="wrangling.html#describing-or-summarizing-the-data"><i class="fa fa-check"></i><b>3.5</b> Describing or summarizing the data</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling.html"><a href="wrangling.html#with-dplyrsummarize"><i class="fa fa-check"></i><b>3.5.1</b> With <code>dplyr::summarize()</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling.html"><a href="wrangling.html#with-specific-functions-for-descriptive-analysis"><i class="fa fa-check"></i><b>3.5.2</b> With specific functions for descriptive analysis</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling.html"><a href="wrangling.html#descriptive-statistics-by-group"><i class="fa fa-check"></i><b>3.5.3</b> Descriptive statistics by group</a></li>
<li class="chapter" data-level="3.5.4" data-path="wrangling.html"><a href="wrangling.html#export-results"><i class="fa fa-check"></i><b>3.5.4</b> Export results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>4</b> Data visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="visualization.html"><a href="visualization.html#univariate-distributions"><i class="fa fa-check"></i><b>4.1</b> Univariate distributions</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="visualization.html"><a href="visualization.html#continuous-variables"><i class="fa fa-check"></i><b>4.1.1</b> Continuous variables</a></li>
<li class="chapter" data-level="4.1.2" data-path="visualization.html"><a href="visualization.html#categorical-variables"><i class="fa fa-check"></i><b>4.1.2</b> Categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="visualization.html"><a href="visualization.html#associations-between-two-variables"><i class="fa fa-check"></i><b>4.2</b> Associations between two variables</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="visualization.html"><a href="visualization.html#two-continuous-variables-scatterplots"><i class="fa fa-check"></i><b>4.2.1</b> Two continuous variables: scatterplots</a></li>
<li class="chapter" data-level="4.2.2" data-path="visualization.html"><a href="visualization.html#two-categorical-variables-complext-bar-plots"><i class="fa fa-check"></i><b>4.2.2</b> Two categorical variables: complext bar plots</a></li>
<li class="chapter" data-level="4.2.3" data-path="visualization.html"><a href="visualization.html#one-continuous-and-one-categorical-variable"><i class="fa fa-check"></i><b>4.2.3</b> One continuous and one categorical variable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reproducible.html"><a href="reproducible.html"><i class="fa fa-check"></i><b>5</b> Creating reproducible reports</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for social science and business analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wrangling" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data wrangling and descriptive statistics<a href="wrangling.html#wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This workshop session is about data wrangling and obtaining summary or descriptive statistics about the data. We will mostly (but not exclusively) use tidyverse packages and functions.</p>
<p>A lot of what’s covered here is treated in more details in the <code>dplyr</code> package <a href="https://dplyr.tidyverse.org/">website</a>. Also see the <code>dplyr</code> <a href="https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf">cheat sheet</a> for a visually nice summary.</p>
<p>For more information about the many different types of external sources from which (rectangular) data can be imported into R, see the <code>readr</code> package <a href="https://readr.tidyverse.org/">website</a>.</p>
<p>Let’s start by loading packages, clearing the workspace, and loading the data from external source.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="wrangling.html#cb222-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb222-2"><a href="wrangling.html#cb222-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb222-3"><a href="wrangling.html#cb222-3" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb222-4"><a href="wrangling.html#cb222-4" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb222-5"><a href="wrangling.html#cb222-5" tabindex="-1"></a></span>
<span id="cb222-6"><a href="wrangling.html#cb222-6" tabindex="-1"></a><span class="co"># Clear the workspace</span></span>
<span id="cb222-7"><a href="wrangling.html#cb222-7" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb222-8"><a href="wrangling.html#cb222-8" tabindex="-1"></a></span>
<span id="cb222-9"><a href="wrangling.html#cb222-9" tabindex="-1"></a><span class="co"># Let&#39;s read the data in as a tibble data frame.</span></span>
<span id="cb222-10"><a href="wrangling.html#cb222-10" tabindex="-1"></a>(data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/data.csv&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 5
##    1. Il tuo anno di nascita è..…¹ 2. Il tuo genere è..…² 4. Sei nato/a in Ita…³
##                              &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;                 
##  1                            1994 Uomo                   Sì                    
##  2                            1968 Donna                  No                    
##  3                            1969 Uomo                   Sì                    
##  4                            1964 Uomo                   Sì                    
##  5                            1971 Uomo                   Sì                    
##  6                            1961 Preferisco non rispon… Sì                    
##  7                            1993 Donna                  Sì                    
##  8                            1981 Uomo                   Sì                    
##  9                            1979 Donna                  Sì                    
## 10                            1971 Uomo                   Sì                    
## # ℹ 990 more rows
## # ℹ abbreviated names: ¹​`1. Il tuo anno di nascita è...`,
## #   ²​`2. Il tuo genere è...`, ³​`4. Sei nato/a in Italia?`
## # ℹ 2 more variables:
## #   `11. Il tuo ultimo titolo di studi conseguito è...` &lt;chr&gt;, company &lt;chr&gt;</code></pre>
<div id="subsetting-and-renaming-variables" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Subsetting and renaming variables<a href="wrangling.html#subsetting-and-renaming-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The <code>select()</code> verb.</li>
<li>Renaming variables (i.e., data columns).</li>
<li>Selecting variables (i.e., subsetting a data frame’s columns).</li>
<li>Pulling one variable out of the data frame.</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="wrangling.html#cb224-1" tabindex="-1"></a><span class="co"># Give better names to the variables: by variable name.</span></span>
<span id="cb224-2"><a href="wrangling.html#cb224-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb224-3"><a href="wrangling.html#cb224-3" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb224-4"><a href="wrangling.html#cb224-4" tabindex="-1"></a>    <span class="at">birth.y =</span> <span class="st">`</span><span class="at">1. Il tuo anno di nascita è...</span><span class="st">`</span>,</span>
<span id="cb224-5"><a href="wrangling.html#cb224-5" tabindex="-1"></a>    <span class="at">gender =</span> <span class="st">`</span><span class="at">2. Il tuo genere è...</span><span class="st">`</span></span>
<span id="cb224-6"><a href="wrangling.html#cb224-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 5
##    birth.y gender          4. Sei nato/a in Ita…¹ 11. Il tuo ultimo ti…² company
##      &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;                  &lt;chr&gt;                  &lt;chr&gt;  
##  1    1994 Uomo            Sì                     Master post-laurea     My Veg…
##  2    1968 Donna           No                     Laurea                 Urban …
##  3    1969 Uomo            Sì                     Diploma di scuola sup… Office…
##  4    1964 Uomo            Sì                     Diploma di scuola sup… Raven  
##  5    1971 Uomo            Sì                     Diploma di scuola sup… Fix Gu…
##  6    1961 Preferisco non… Sì                     Laurea                 Office…
##  7    1993 Donna           Sì                     Scuola di specializza… House …
##  8    1981 Uomo            Sì                     Laurea                 Satan&#39;…
##  9    1979 Donna           Sì                     Laurea                 Fruity…
## 10    1971 Uomo            Sì                     Diploma di scuola sup… Coal K…
## # ℹ 990 more rows
## # ℹ abbreviated names: ¹​`4. Sei nato/a in Italia?`,
## #   ²​`11. Il tuo ultimo titolo di studi conseguito è...`</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="wrangling.html#cb226-1" tabindex="-1"></a><span class="co"># Give better names to the variables: by variable position.</span></span>
<span id="cb226-2"><a href="wrangling.html#cb226-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb226-3"><a href="wrangling.html#cb226-3" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb226-4"><a href="wrangling.html#cb226-4" tabindex="-1"></a>    <span class="at">birth.y =</span> <span class="dv">1</span>,</span>
<span id="cb226-5"><a href="wrangling.html#cb226-5" tabindex="-1"></a>    <span class="at">gender =</span> <span class="dv">2</span></span>
<span id="cb226-6"><a href="wrangling.html#cb226-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 5
##    birth.y gender          4. Sei nato/a in Ita…¹ 11. Il tuo ultimo ti…² company
##      &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;                  &lt;chr&gt;                  &lt;chr&gt;  
##  1    1994 Uomo            Sì                     Master post-laurea     My Veg…
##  2    1968 Donna           No                     Laurea                 Urban …
##  3    1969 Uomo            Sì                     Diploma di scuola sup… Office…
##  4    1964 Uomo            Sì                     Diploma di scuola sup… Raven  
##  5    1971 Uomo            Sì                     Diploma di scuola sup… Fix Gu…
##  6    1961 Preferisco non… Sì                     Laurea                 Office…
##  7    1993 Donna           Sì                     Scuola di specializza… House …
##  8    1981 Uomo            Sì                     Laurea                 Satan&#39;…
##  9    1979 Donna           Sì                     Laurea                 Fruity…
## 10    1971 Uomo            Sì                     Diploma di scuola sup… Coal K…
## # ℹ 990 more rows
## # ℹ abbreviated names: ¹​`4. Sei nato/a in Italia?`,
## #   ²​`11. Il tuo ultimo titolo di studi conseguito è...`</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="wrangling.html#cb228-1" tabindex="-1"></a><span class="co"># Rename all or a collection of variables with a function: .x represents each</span></span>
<span id="cb228-2"><a href="wrangling.html#cb228-2" tabindex="-1"></a><span class="co"># variable name</span></span>
<span id="cb228-3"><a href="wrangling.html#cb228-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb228-4"><a href="wrangling.html#cb228-4" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">toupper</span>(.x))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 5
##    1. IL TUO ANNO DI NASCITA È..…¹ 2. IL TUO GENERE È..…² 4. SEI NATO/A IN ITA…³
##                              &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;                 
##  1                            1994 Uomo                   Sì                    
##  2                            1968 Donna                  No                    
##  3                            1969 Uomo                   Sì                    
##  4                            1964 Uomo                   Sì                    
##  5                            1971 Uomo                   Sì                    
##  6                            1961 Preferisco non rispon… Sì                    
##  7                            1993 Donna                  Sì                    
##  8                            1981 Uomo                   Sì                    
##  9                            1979 Donna                  Sì                    
## 10                            1971 Uomo                   Sì                    
## # ℹ 990 more rows
## # ℹ abbreviated names: ¹​`1. IL TUO ANNO DI NASCITA È...`,
## #   ²​`2. IL TUO GENERE È...`, ³​`4. SEI NATO/A IN ITALIA?`
## # ℹ 2 more variables:
## #   `11. IL TUO ULTIMO TITOLO DI STUDI CONSEGUITO È...` &lt;chr&gt;, COMPANY &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="wrangling.html#cb230-1" tabindex="-1"></a><span class="co"># Final names </span></span>
<span id="cb230-2"><a href="wrangling.html#cb230-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb230-3"><a href="wrangling.html#cb230-3" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb230-4"><a href="wrangling.html#cb230-4" tabindex="-1"></a>    <span class="at">birth.y =</span> <span class="st">`</span><span class="at">1. Il tuo anno di nascita è...</span><span class="st">`</span>,</span>
<span id="cb230-5"><a href="wrangling.html#cb230-5" tabindex="-1"></a>    <span class="at">gender =</span> <span class="st">`</span><span class="at">2. Il tuo genere è...</span><span class="st">`</span>,</span>
<span id="cb230-6"><a href="wrangling.html#cb230-6" tabindex="-1"></a>    <span class="at">nato.it =</span> <span class="st">`</span><span class="at">4. Sei nato/a in Italia?</span><span class="st">`</span>,</span>
<span id="cb230-7"><a href="wrangling.html#cb230-7" tabindex="-1"></a>    <span class="at">edu =</span> <span class="st">`</span><span class="at">11. Il tuo ultimo titolo di studi conseguito è...</span><span class="st">`</span></span>
<span id="cb230-8"><a href="wrangling.html#cb230-8" tabindex="-1"></a>  )</span>
<span id="cb230-9"><a href="wrangling.html#cb230-9" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 5
##    birth.y gender                    nato.it edu                         company
##      &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt;   &lt;chr&gt;                       &lt;chr&gt;  
##  1    1994 Uomo                      Sì      Master post-laurea          My Veg…
##  2    1968 Donna                     No      Laurea                      Urban …
##  3    1969 Uomo                      Sì      Diploma di scuola superiore Office…
##  4    1964 Uomo                      Sì      Diploma di scuola superiore Raven  
##  5    1971 Uomo                      Sì      Diploma di scuola superiore Fix Gu…
##  6    1961 Preferisco non rispondere Sì      Laurea                      Office…
##  7    1993 Donna                     Sì      Scuola di specializzazione… House …
##  8    1981 Uomo                      Sì      Laurea                      Satan&#39;…
##  9    1979 Donna                     Sì      Laurea                      Fruity…
## 10    1971 Uomo                      Sì      Diploma di scuola superiore Coal K…
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="wrangling.html#cb232-1" tabindex="-1"></a><span class="co"># Subset to specific variables of interest.</span></span>
<span id="cb232-2"><a href="wrangling.html#cb232-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb232-3"><a href="wrangling.html#cb232-3" tabindex="-1"></a>  <span class="fu">select</span>(gender, edu)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 2
##    gender                    edu                                   
##    &lt;chr&gt;                     &lt;chr&gt;                                 
##  1 Uomo                      Master post-laurea                    
##  2 Donna                     Laurea                                
##  3 Uomo                      Diploma di scuola superiore           
##  4 Uomo                      Diploma di scuola superiore           
##  5 Uomo                      Diploma di scuola superiore           
##  6 Preferisco non rispondere Laurea                                
##  7 Donna                     Scuola di specializzazione post-laurea
##  8 Uomo                      Laurea                                
##  9 Donna                     Laurea                                
## 10 Uomo                      Diploma di scuola superiore           
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="wrangling.html#cb234-1" tabindex="-1"></a><span class="co"># Remove certain variables</span></span>
<span id="cb234-2"><a href="wrangling.html#cb234-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb234-3"><a href="wrangling.html#cb234-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>gender)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 4
##    birth.y nato.it edu                                    company             
##      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;                                  &lt;chr&gt;               
##  1    1994 Sì      Master post-laurea                     My Vegetarian Dinner
##  2    1968 No      Laurea                                 Urban Gallery       
##  3    1969 Sì      Diploma di scuola superiore            Office Tile         
##  4    1964 Sì      Diploma di scuola superiore            Raven               
##  5    1971 Sì      Diploma di scuola superiore            Fix Guru            
##  6    1961 Sì      Laurea                                 Office Brush        
##  7    1993 Sì      Scuola di specializzazione post-laurea House Brush         
##  8    1981 Sì      Laurea                                 Satan&#39;s Sister      
##  9    1979 Sì      Laurea                                 FruityFlix          
## 10    1971 Sì      Diploma di scuola superiore            Coal Kings          
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="wrangling.html#cb236-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb236-2"><a href="wrangling.html#cb236-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(gender, edu))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##    birth.y nato.it company             
##      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;               
##  1    1994 Sì      My Vegetarian Dinner
##  2    1968 No      Urban Gallery       
##  3    1969 Sì      Office Tile         
##  4    1964 Sì      Raven               
##  5    1971 Sì      Fix Guru            
##  6    1961 Sì      Office Brush        
##  7    1993 Sì      House Brush         
##  8    1981 Sì      Satan&#39;s Sister      
##  9    1979 Sì      FruityFlix          
## 10    1971 Sì      Coal Kings          
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="wrangling.html#cb238-1" tabindex="-1"></a><span class="co"># Reorder variables.</span></span>
<span id="cb238-2"><a href="wrangling.html#cb238-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb238-3"><a href="wrangling.html#cb238-3" tabindex="-1"></a>  <span class="fu">select</span>(company, edu, gender)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##    company              edu                                    gender           
##    &lt;chr&gt;                &lt;chr&gt;                                  &lt;chr&gt;            
##  1 My Vegetarian Dinner Master post-laurea                     Uomo             
##  2 Urban Gallery        Laurea                                 Donna            
##  3 Office Tile          Diploma di scuola superiore            Uomo             
##  4 Raven                Diploma di scuola superiore            Uomo             
##  5 Fix Guru             Diploma di scuola superiore            Uomo             
##  6 Office Brush         Laurea                                 Preferisco non r…
##  7 House Brush          Scuola di specializzazione post-laurea Donna            
##  8 Satan&#39;s Sister       Laurea                                 Uomo             
##  9 FruityFlix           Laurea                                 Donna            
## 10 Coal Kings           Diploma di scuola superiore            Uomo             
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="wrangling.html#cb240-1" tabindex="-1"></a><span class="co"># Subset/reorder while renaming</span></span>
<span id="cb240-2"><a href="wrangling.html#cb240-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb240-3"><a href="wrangling.html#cb240-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">company2 =</span> company, <span class="at">education =</span> edu)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 2
##    company2             education                             
##    &lt;chr&gt;                &lt;chr&gt;                                 
##  1 My Vegetarian Dinner Master post-laurea                    
##  2 Urban Gallery        Laurea                                
##  3 Office Tile          Diploma di scuola superiore           
##  4 Raven                Diploma di scuola superiore           
##  5 Fix Guru             Diploma di scuola superiore           
##  6 Office Brush         Laurea                                
##  7 House Brush          Scuola di specializzazione post-laurea
##  8 Satan&#39;s Sister       Laurea                                
##  9 FruityFlix           Laurea                                
## 10 Coal Kings           Diploma di scuola superiore           
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="wrangling.html#cb242-1" tabindex="-1"></a><span class="co"># Select offers very flexible syntax to indicate variable names, for example:</span></span>
<span id="cb242-2"><a href="wrangling.html#cb242-2" tabindex="-1"></a><span class="co"># Select variables whose name ends with &quot;y&quot;.</span></span>
<span id="cb242-3"><a href="wrangling.html#cb242-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb242-4"><a href="wrangling.html#cb242-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;y&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 2
##    birth.y company             
##      &lt;dbl&gt; &lt;chr&gt;               
##  1    1994 My Vegetarian Dinner
##  2    1968 Urban Gallery       
##  3    1969 Office Tile         
##  4    1964 Raven               
##  5    1971 Fix Guru            
##  6    1961 Office Brush        
##  7    1993 House Brush         
##  8    1981 Satan&#39;s Sister      
##  9    1979 FruityFlix          
## 10    1971 Coal Kings          
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="wrangling.html#cb244-1" tabindex="-1"></a><span class="co"># Select variables which are numeric.</span></span>
<span id="cb244-2"><a href="wrangling.html#cb244-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb244-3"><a href="wrangling.html#cb244-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 1
##    birth.y
##      &lt;dbl&gt;
##  1    1994
##  2    1968
##  3    1969
##  4    1964
##  5    1971
##  6    1961
##  7    1993
##  8    1981
##  9    1979
## 10    1971
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="wrangling.html#cb246-1" tabindex="-1"></a><span class="co"># See ?select for all options.</span></span>
<span id="cb246-2"><a href="wrangling.html#cb246-2" tabindex="-1"></a></span>
<span id="cb246-3"><a href="wrangling.html#cb246-3" tabindex="-1"></a><span class="co"># Note the difference between these two types of subsetting.</span></span>
<span id="cb246-4"><a href="wrangling.html#cb246-4" tabindex="-1"></a></span>
<span id="cb246-5"><a href="wrangling.html#cb246-5" tabindex="-1"></a><span class="co"># Option 1: keeping the data frame structure</span></span>
<span id="cb246-6"><a href="wrangling.html#cb246-6" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb246-7"><a href="wrangling.html#cb246-7" tabindex="-1"></a>  <span class="fu">select</span>(birth.y)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 1
##    birth.y
##      &lt;dbl&gt;
##  1    1994
##  2    1968
##  3    1969
##  4    1964
##  5    1971
##  6    1961
##  7    1993
##  8    1981
##  9    1979
## 10    1971
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="wrangling.html#cb248-1" tabindex="-1"></a><span class="co"># This is the same as</span></span>
<span id="cb248-2"><a href="wrangling.html#cb248-2" tabindex="-1"></a>data[<span class="st">&quot;birth.y&quot;</span>]</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 1
##    birth.y
##      &lt;dbl&gt;
##  1    1994
##  2    1968
##  3    1969
##  4    1964
##  5    1971
##  6    1961
##  7    1993
##  8    1981
##  9    1979
## 10    1971
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="wrangling.html#cb250-1" tabindex="-1"></a><span class="co"># Option 2: getting the inner vector out of the data frame structure (just print</span></span>
<span id="cb250-2"><a href="wrangling.html#cb250-2" tabindex="-1"></a><span class="co"># the first few values).</span></span>
<span id="cb250-3"><a href="wrangling.html#cb250-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb250-4"><a href="wrangling.html#cb250-4" tabindex="-1"></a>  <span class="fu">pull</span>(birth.y) <span class="sc">|&gt;</span> </span>
<span id="cb250-5"><a href="wrangling.html#cb250-5" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] 1994 1968 1969 1964 1971 1961</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="wrangling.html#cb252-1" tabindex="-1"></a><span class="co"># This is the same as </span></span>
<span id="cb252-2"><a href="wrangling.html#cb252-2" tabindex="-1"></a>data<span class="sc">$</span>birth.y <span class="sc">|&gt;</span> </span>
<span id="cb252-3"><a href="wrangling.html#cb252-3" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] 1994 1968 1969 1964 1971 1961</code></pre>
</div>
<div id="recoding-cleaning-creating-variables" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Recoding, cleaning, creating variables<a href="wrangling.html#recoding-cleaning-creating-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The <code>mutate()</code> verb.</li>
<li>Creating new continuous (i.e., interval or ratio) variables.</li>
<li>Recoding continuous variables into categorical (i.e., ordinal or nominal), that is, factors.</li>
<li>Recoding factors: relabeling factor levels (i.e., categories).</li>
<li>Reordering factor levels.</li>
<li>Recoding factors: combining multiple levels into one.</li>
</ul>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="wrangling.html#cb254-1" tabindex="-1"></a><span class="co"># Create new variable from existing continuous variable.</span></span>
<span id="cb254-2"><a href="wrangling.html#cb254-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb254-3"><a href="wrangling.html#cb254-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb254-4"><a href="wrangling.html#cb254-4" tabindex="-1"></a>    <span class="at">age =</span> <span class="dv">2023</span> <span class="sc">-</span> birth.y</span>
<span id="cb254-5"><a href="wrangling.html#cb254-5" tabindex="-1"></a>  )</span>
<span id="cb254-6"><a href="wrangling.html#cb254-6" tabindex="-1"></a></span>
<span id="cb254-7"><a href="wrangling.html#cb254-7" tabindex="-1"></a><span class="co"># See result.</span></span>
<span id="cb254-8"><a href="wrangling.html#cb254-8" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb254-9"><a href="wrangling.html#cb254-9" tabindex="-1"></a>  <span class="fu">select</span>(birth.y, age)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 2
##    birth.y   age
##      &lt;dbl&gt; &lt;dbl&gt;
##  1    1994    29
##  2    1968    55
##  3    1969    54
##  4    1964    59
##  5    1971    52
##  6    1961    62
##  7    1993    30
##  8    1981    42
##  9    1979    44
## 10    1971    52
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="wrangling.html#cb256-1" tabindex="-1"></a><span class="co"># Recode continuous variable into categorical (i.e., factor).</span></span>
<span id="cb256-2"><a href="wrangling.html#cb256-2" tabindex="-1"></a></span>
<span id="cb256-3"><a href="wrangling.html#cb256-3" tabindex="-1"></a><span class="co"># Age -&gt; Generation</span></span>
<span id="cb256-4"><a href="wrangling.html#cb256-4" tabindex="-1"></a><span class="co"># Gen Z: 1996-2010 -&gt; Fascia età 13-27</span></span>
<span id="cb256-5"><a href="wrangling.html#cb256-5" tabindex="-1"></a><span class="co"># Millennials: 1980-1995 -&gt; Fascia età 28-43</span></span>
<span id="cb256-6"><a href="wrangling.html#cb256-6" tabindex="-1"></a><span class="co"># Gen X: 1965-1979 -&gt; Fascia età 44-58</span></span>
<span id="cb256-7"><a href="wrangling.html#cb256-7" tabindex="-1"></a><span class="co"># Baby boomers: 1946-1964 -&gt; Fascia età 59-77 (ma includiamo respondents fino a </span></span>
<span id="cb256-8"><a href="wrangling.html#cb256-8" tabindex="-1"></a><span class="co"># 80).</span></span>
<span id="cb256-9"><a href="wrangling.html#cb256-9" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb256-10"><a href="wrangling.html#cb256-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb256-11"><a href="wrangling.html#cb256-11" tabindex="-1"></a>    <span class="at">gen1 =</span> <span class="fu">cut</span>(age, <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">27</span>, <span class="dv">43</span>, <span class="dv">58</span>, <span class="dv">80</span>))</span>
<span id="cb256-12"><a href="wrangling.html#cb256-12" tabindex="-1"></a>  )</span>
<span id="cb256-13"><a href="wrangling.html#cb256-13" tabindex="-1"></a></span>
<span id="cb256-14"><a href="wrangling.html#cb256-14" tabindex="-1"></a><span class="co"># View. Note the new variable is listed as &lt;fct&gt;.</span></span>
<span id="cb256-15"><a href="wrangling.html#cb256-15" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb256-16"><a href="wrangling.html#cb256-16" tabindex="-1"></a>  <span class="fu">select</span>(birth.y, age, gen1)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##    birth.y   age gen1   
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;  
##  1    1994    29 (27,43]
##  2    1968    55 (43,58]
##  3    1969    54 (43,58]
##  4    1964    59 (58,80]
##  5    1971    52 (43,58]
##  6    1961    62 (58,80]
##  7    1993    30 (27,43]
##  8    1981    42 (27,43]
##  9    1979    44 (43,58]
## 10    1971    52 (43,58]
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="wrangling.html#cb258-1" tabindex="-1"></a><span class="co"># Recode factor: new labels for generations</span></span>
<span id="cb258-2"><a href="wrangling.html#cb258-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb258-3"><a href="wrangling.html#cb258-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb258-4"><a href="wrangling.html#cb258-4" tabindex="-1"></a>    <span class="at">gen =</span> <span class="fu">fct_recode</span>(gen1, <span class="st">`</span><span class="at">gen z</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(13,27]&quot;</span>, <span class="st">`</span><span class="at">millennials</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(27,43]&quot;</span>, </span>
<span id="cb258-5"><a href="wrangling.html#cb258-5" tabindex="-1"></a>                     <span class="st">`</span><span class="at">gen x</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(43,58]&quot;</span>, <span class="st">`</span><span class="at">baby boomers</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(58,80]&quot;</span>)</span>
<span id="cb258-6"><a href="wrangling.html#cb258-6" tabindex="-1"></a>  )</span>
<span id="cb258-7"><a href="wrangling.html#cb258-7" tabindex="-1"></a></span>
<span id="cb258-8"><a href="wrangling.html#cb258-8" tabindex="-1"></a><span class="co"># View.</span></span>
<span id="cb258-9"><a href="wrangling.html#cb258-9" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb258-10"><a href="wrangling.html#cb258-10" tabindex="-1"></a>  <span class="fu">select</span>(age, gen1, gen)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##      age gen1    gen         
##    &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;       
##  1    29 (27,43] millennials 
##  2    55 (43,58] gen x       
##  3    54 (43,58] gen x       
##  4    59 (58,80] baby boomers
##  5    52 (43,58] gen x       
##  6    62 (58,80] baby boomers
##  7    30 (27,43] millennials 
##  8    42 (27,43] millennials 
##  9    44 (43,58] gen x       
## 10    52 (43,58] gen x       
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="wrangling.html#cb260-1" tabindex="-1"></a><span class="co"># Factors have levels (i.e., categories). These are stored in a specific order.</span></span>
<span id="cb260-2"><a href="wrangling.html#cb260-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb260-3"><a href="wrangling.html#cb260-3" tabindex="-1"></a>  <span class="fu">pull</span>(gen) <span class="sc">|&gt;</span> </span>
<span id="cb260-4"><a href="wrangling.html#cb260-4" tabindex="-1"></a>  <span class="fu">levels</span>()</span></code></pre></div>
<pre><code>## [1] &quot;gen z&quot;        &quot;millennials&quot;  &quot;gen x&quot;        &quot;baby boomers&quot;</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="wrangling.html#cb262-1" tabindex="-1"></a><span class="co"># This order affects the output of certain functions, including those for </span></span>
<span id="cb262-2"><a href="wrangling.html#cb262-2" tabindex="-1"></a><span class="co"># producing summary tables and visualizations. For example:</span></span>
<span id="cb262-3"><a href="wrangling.html#cb262-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb262-4"><a href="wrangling.html#cb262-4" tabindex="-1"></a>  <span class="fu">tabyl</span>(gen)</span></code></pre></div>
<pre><code>##           gen   n percent
##         gen z  17   0.017
##   millennials 297   0.297
##         gen x 576   0.576
##  baby boomers 110   0.110</code></pre>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="wrangling.html#cb264-1" tabindex="-1"></a><span class="co"># We can change the order of levels.</span></span>
<span id="cb264-2"><a href="wrangling.html#cb264-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb264-3"><a href="wrangling.html#cb264-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb264-4"><a href="wrangling.html#cb264-4" tabindex="-1"></a>    <span class="at">gen =</span> <span class="fu">fct_relevel</span>(gen, <span class="st">&quot;baby boomers&quot;</span>, <span class="st">&quot;gen x&quot;</span>, <span class="st">&quot;millennials&quot;</span>, <span class="st">&quot;gen z&quot;</span>)</span>
<span id="cb264-5"><a href="wrangling.html#cb264-5" tabindex="-1"></a>  )</span>
<span id="cb264-6"><a href="wrangling.html#cb264-6" tabindex="-1"></a></span>
<span id="cb264-7"><a href="wrangling.html#cb264-7" tabindex="-1"></a><span class="co"># See the result.</span></span>
<span id="cb264-8"><a href="wrangling.html#cb264-8" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb264-9"><a href="wrangling.html#cb264-9" tabindex="-1"></a>  <span class="fu">pull</span>(gen) <span class="sc">|&gt;</span> </span>
<span id="cb264-10"><a href="wrangling.html#cb264-10" tabindex="-1"></a>  <span class="fu">levels</span>()</span></code></pre></div>
<pre><code>## [1] &quot;baby boomers&quot; &quot;gen x&quot;        &quot;millennials&quot;  &quot;gen z&quot;</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="wrangling.html#cb266-1" tabindex="-1"></a><span class="co"># Now the summary table has rows in a different order.</span></span>
<span id="cb266-2"><a href="wrangling.html#cb266-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb266-3"><a href="wrangling.html#cb266-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(gen)</span></code></pre></div>
<pre><code>##           gen   n percent
##  baby boomers 110   0.110
##         gen x 576   0.576
##   millennials 297   0.297
##         gen z  17   0.017</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="wrangling.html#cb268-1" tabindex="-1"></a><span class="co"># Recode age in a different way: 10-year age brackets.</span></span>
<span id="cb268-2"><a href="wrangling.html#cb268-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb268-3"><a href="wrangling.html#cb268-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb268-4"><a href="wrangling.html#cb268-4" tabindex="-1"></a>    <span class="at">age.br =</span> <span class="fu">cut</span>(age, <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>))</span>
<span id="cb268-5"><a href="wrangling.html#cb268-5" tabindex="-1"></a>  )</span>
<span id="cb268-6"><a href="wrangling.html#cb268-6" tabindex="-1"></a></span>
<span id="cb268-7"><a href="wrangling.html#cb268-7" tabindex="-1"></a><span class="co"># View.</span></span>
<span id="cb268-8"><a href="wrangling.html#cb268-8" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb268-9"><a href="wrangling.html#cb268-9" tabindex="-1"></a>  <span class="fu">select</span>(age, age.br)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 2
##      age age.br 
##    &lt;dbl&gt; &lt;fct&gt;  
##  1    29 (20,30]
##  2    55 (50,60]
##  3    54 (50,60]
##  4    59 (50,60]
##  5    52 (50,60]
##  6    62 (60,70]
##  7    30 (20,30]
##  8    42 (40,50]
##  9    44 (40,50]
## 10    52 (50,60]
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="wrangling.html#cb270-1" tabindex="-1"></a><span class="co"># Levels of the new variable</span></span>
<span id="cb270-2"><a href="wrangling.html#cb270-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb270-3"><a href="wrangling.html#cb270-3" tabindex="-1"></a>  <span class="fu">pull</span>(age.br) <span class="sc">|&gt;</span> </span>
<span id="cb270-4"><a href="wrangling.html#cb270-4" tabindex="-1"></a>  <span class="fu">levels</span>()</span></code></pre></div>
<pre><code>## [1] &quot;(20,30]&quot; &quot;(30,40]&quot; &quot;(40,50]&quot; &quot;(50,60]&quot; &quot;(60,70]&quot; &quot;(70,80]&quot;</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="wrangling.html#cb272-1" tabindex="-1"></a><span class="co"># Recode, i.e., re-label age brackets.</span></span>
<span id="cb272-2"><a href="wrangling.html#cb272-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb272-3"><a href="wrangling.html#cb272-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb272-4"><a href="wrangling.html#cb272-4" tabindex="-1"></a>    <span class="at">age.br.2 =</span> <span class="fu">fct_recode</span>(age.br,</span>
<span id="cb272-5"><a href="wrangling.html#cb272-5" tabindex="-1"></a>      <span class="st">`</span><span class="at">21-30</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(20,30]&quot;</span>,</span>
<span id="cb272-6"><a href="wrangling.html#cb272-6" tabindex="-1"></a>      <span class="st">`</span><span class="at">31-40</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(30,40]&quot;</span>,</span>
<span id="cb272-7"><a href="wrangling.html#cb272-7" tabindex="-1"></a>      <span class="st">`</span><span class="at">41-50</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(40,50]&quot;</span>,</span>
<span id="cb272-8"><a href="wrangling.html#cb272-8" tabindex="-1"></a>      <span class="st">`</span><span class="at">51-60</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(50,60]&quot;</span>,</span>
<span id="cb272-9"><a href="wrangling.html#cb272-9" tabindex="-1"></a>      <span class="st">`</span><span class="at">61-70</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(60,70]&quot;</span>,</span>
<span id="cb272-10"><a href="wrangling.html#cb272-10" tabindex="-1"></a>      <span class="st">`</span><span class="at">71-80</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;(70,80]&quot;</span></span>
<span id="cb272-11"><a href="wrangling.html#cb272-11" tabindex="-1"></a>    )</span>
<span id="cb272-12"><a href="wrangling.html#cb272-12" tabindex="-1"></a>  )</span>
<span id="cb272-13"><a href="wrangling.html#cb272-13" tabindex="-1"></a></span>
<span id="cb272-14"><a href="wrangling.html#cb272-14" tabindex="-1"></a><span class="co"># View results.</span></span>
<span id="cb272-15"><a href="wrangling.html#cb272-15" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb272-16"><a href="wrangling.html#cb272-16" tabindex="-1"></a>  <span class="fu">select</span>(age, age.br, age.br<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##      age age.br  age.br.2
##    &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;   
##  1    29 (20,30] 21-30   
##  2    55 (50,60] 51-60   
##  3    54 (50,60] 51-60   
##  4    59 (50,60] 51-60   
##  5    52 (50,60] 51-60   
##  6    62 (60,70] 61-70   
##  7    30 (20,30] 21-30   
##  8    42 (40,50] 41-50   
##  9    44 (40,50] 41-50   
## 10    52 (50,60] 51-60   
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="wrangling.html#cb274-1" tabindex="-1"></a><span class="co"># Collapse 10-year brackets into 20-year.</span></span>
<span id="cb274-2"><a href="wrangling.html#cb274-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb274-3"><a href="wrangling.html#cb274-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb274-4"><a href="wrangling.html#cb274-4" tabindex="-1"></a>    <span class="at">age.br.3 =</span> <span class="fu">fct_collapse</span>(age.br<span class="fl">.2</span>,</span>
<span id="cb274-5"><a href="wrangling.html#cb274-5" tabindex="-1"></a>      <span class="st">`</span><span class="at">21-40</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;21-30&quot;</span>, <span class="st">&quot;31-40&quot;</span>),</span>
<span id="cb274-6"><a href="wrangling.html#cb274-6" tabindex="-1"></a>      <span class="st">`</span><span class="at">41-60</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;41-50&quot;</span>, <span class="st">&quot;51-60&quot;</span>),</span>
<span id="cb274-7"><a href="wrangling.html#cb274-7" tabindex="-1"></a>      <span class="st">`</span><span class="at">61-80</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;61-70&quot;</span>, <span class="st">&quot;71-80&quot;</span>)</span>
<span id="cb274-8"><a href="wrangling.html#cb274-8" tabindex="-1"></a>    )</span>
<span id="cb274-9"><a href="wrangling.html#cb274-9" tabindex="-1"></a>  )</span>
<span id="cb274-10"><a href="wrangling.html#cb274-10" tabindex="-1"></a></span>
<span id="cb274-11"><a href="wrangling.html#cb274-11" tabindex="-1"></a><span class="co"># View results.</span></span>
<span id="cb274-12"><a href="wrangling.html#cb274-12" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb274-13"><a href="wrangling.html#cb274-13" tabindex="-1"></a>  <span class="fu">select</span>(age, age.br<span class="fl">.2</span>, age.br<span class="fl">.3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 3
##      age age.br.2 age.br.3
##    &lt;dbl&gt; &lt;fct&gt;    &lt;fct&gt;   
##  1    29 21-30    21-40   
##  2    55 51-60    41-60   
##  3    54 51-60    41-60   
##  4    59 51-60    41-60   
##  5    52 51-60    41-60   
##  6    62 61-70    61-80   
##  7    30 21-30    21-40   
##  8    42 41-50    41-60   
##  9    44 41-50    41-60   
## 10    52 51-60    41-60   
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="wrangling.html#cb276-1" tabindex="-1"></a><span class="co"># Check consistency with cross-tabulations. </span></span>
<span id="cb276-2"><a href="wrangling.html#cb276-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb276-3"><a href="wrangling.html#cb276-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(age.br<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>##  age.br.2   n percent
##     21-30  58   0.058
##     31-40 175   0.175
##     41-50 325   0.325
##     51-60 391   0.391
##     61-70  50   0.050
##     71-80   1   0.001</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="wrangling.html#cb278-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb278-2"><a href="wrangling.html#cb278-2" tabindex="-1"></a>  <span class="fu">tabyl</span>(age.br<span class="fl">.3</span>)</span></code></pre></div>
<pre><code>##  age.br.3   n percent
##     21-40 233   0.233
##     41-60 716   0.716
##     61-80  51   0.051</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="wrangling.html#cb280-1" tabindex="-1"></a><span class="co"># Is this what we should expect?</span></span>
<span id="cb280-2"><a href="wrangling.html#cb280-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb280-3"><a href="wrangling.html#cb280-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(age.br<span class="fl">.2</span>, age.br<span class="fl">.3</span>)</span></code></pre></div>
<pre><code>##  age.br.2 21-40 41-60 61-80
##     21-30    58     0     0
##     31-40   175     0     0
##     41-50     0   325     0
##     51-60     0   391     0
##     61-70     0     0    50
##     71-80     0     0     1</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="wrangling.html#cb282-1" tabindex="-1"></a><span class="co"># Another example of recoding/collapsing. Check out the original education </span></span>
<span id="cb282-2"><a href="wrangling.html#cb282-2" tabindex="-1"></a><span class="co"># categories (are they in the correct order?).</span></span>
<span id="cb282-3"><a href="wrangling.html#cb282-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb282-4"><a href="wrangling.html#cb282-4" tabindex="-1"></a>  <span class="fu">tabyl</span>(edu)</span></code></pre></div>
<pre><code>##                                      edu   n percent
##              Diploma di scuola superiore 416   0.416
##      Diploma di scuole medie o inferiore  23   0.023
##                                Dottorato  17   0.017
##                                   Laurea 359   0.359
##                       Master post-laurea 127   0.127
##  Scuola di specializzazione post-diploma  31   0.031
##   Scuola di specializzazione post-laurea  27   0.027</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="wrangling.html#cb284-1" tabindex="-1"></a><span class="co"># Recode education. Note other_level = ... argument.</span></span>
<span id="cb284-2"><a href="wrangling.html#cb284-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb284-3"><a href="wrangling.html#cb284-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb284-4"><a href="wrangling.html#cb284-4" tabindex="-1"></a>    <span class="at">edu =</span> <span class="fu">fct_collapse</span>(edu,</span>
<span id="cb284-5"><a href="wrangling.html#cb284-5" tabindex="-1"></a>      <span class="st">`</span><span class="at">Medie o meno</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Diploma di scuole medie o inferiore&quot;</span>,</span>
<span id="cb284-6"><a href="wrangling.html#cb284-6" tabindex="-1"></a>      <span class="at">Superiori =</span> <span class="st">&quot;Diploma di scuola superiore&quot;</span>,</span>
<span id="cb284-7"><a href="wrangling.html#cb284-7" tabindex="-1"></a>      <span class="at">Laurea =</span> <span class="st">&quot;Laurea&quot;</span>,</span>
<span id="cb284-8"><a href="wrangling.html#cb284-8" tabindex="-1"></a>      <span class="st">`</span><span class="at">Post-laurea</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Master post-laurea&quot;</span>, <span class="st">&quot;Dottorato&quot;</span>), </span>
<span id="cb284-9"><a href="wrangling.html#cb284-9" tabindex="-1"></a>      <span class="at">other_level =</span> <span class="st">&quot;Altro&quot;</span></span>
<span id="cb284-10"><a href="wrangling.html#cb284-10" tabindex="-1"></a>    )</span>
<span id="cb284-11"><a href="wrangling.html#cb284-11" tabindex="-1"></a>  )</span>
<span id="cb284-12"><a href="wrangling.html#cb284-12" tabindex="-1"></a></span>
<span id="cb284-13"><a href="wrangling.html#cb284-13" tabindex="-1"></a><span class="co"># Results:</span></span>
<span id="cb284-14"><a href="wrangling.html#cb284-14" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb284-15"><a href="wrangling.html#cb284-15" tabindex="-1"></a>  <span class="fu">tabyl</span>(edu)</span></code></pre></div>
<pre><code>##           edu   n percent
##     Superiori 416   0.416
##  Medie o meno  23   0.023
##   Post-laurea 144   0.144
##        Laurea 359   0.359
##         Altro  58   0.058</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="wrangling.html#cb286-1" tabindex="-1"></a><span class="co"># We still need to arrange levels (categories) in the right order.</span></span>
<span id="cb286-2"><a href="wrangling.html#cb286-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb286-3"><a href="wrangling.html#cb286-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb286-4"><a href="wrangling.html#cb286-4" tabindex="-1"></a>    <span class="at">edu =</span> <span class="fu">fct_relevel</span>(edu, <span class="st">&quot;Medie o meno&quot;</span>, <span class="st">&quot;Superiori&quot;</span>, <span class="st">&quot;Laurea&quot;</span>, <span class="st">&quot;Post-laurea&quot;</span>, <span class="st">&quot;Altro&quot;</span>)</span>
<span id="cb286-5"><a href="wrangling.html#cb286-5" tabindex="-1"></a>  )</span>
<span id="cb286-6"><a href="wrangling.html#cb286-6" tabindex="-1"></a></span>
<span id="cb286-7"><a href="wrangling.html#cb286-7" tabindex="-1"></a><span class="co"># See the new order of levels.</span></span>
<span id="cb286-8"><a href="wrangling.html#cb286-8" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb286-9"><a href="wrangling.html#cb286-9" tabindex="-1"></a>  <span class="fu">tabyl</span>(edu)</span></code></pre></div>
<pre><code>##           edu   n percent
##  Medie o meno  23   0.023
##     Superiori 416   0.416
##        Laurea 359   0.359
##   Post-laurea 144   0.144
##         Altro  58   0.058</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="wrangling.html#cb288-1" tabindex="-1"></a><span class="co"># Recode gender.</span></span>
<span id="cb288-2"><a href="wrangling.html#cb288-2" tabindex="-1"></a></span>
<span id="cb288-3"><a href="wrangling.html#cb288-3" tabindex="-1"></a><span class="co"># See unique (distinct) values of gender</span></span>
<span id="cb288-4"><a href="wrangling.html#cb288-4" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb288-5"><a href="wrangling.html#cb288-5" tabindex="-1"></a>  <span class="fu">tabyl</span>(gender)</span></code></pre></div>
<pre><code>##                                                     gender   n percent
##  Altra identità di genere (transgender, non binario, ecc.)   3   0.003
##                                                      Donna 522   0.522
##                                  Preferisco non rispondere   8   0.008
##                                                       Uomo 467   0.467</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="wrangling.html#cb290-1" tabindex="-1"></a><span class="co"># Recode and reorder levels in the same call</span></span>
<span id="cb290-2"><a href="wrangling.html#cb290-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb290-3"><a href="wrangling.html#cb290-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb290-4"><a href="wrangling.html#cb290-4" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, </span>
<span id="cb290-5"><a href="wrangling.html#cb290-5" tabindex="-1"></a>                        <span class="at">NR =</span> <span class="st">&quot;Preferisco non rispondere&quot;</span>,</span>
<span id="cb290-6"><a href="wrangling.html#cb290-6" tabindex="-1"></a>                        <span class="st">`</span><span class="at">Altra identità</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Altra identità di genere (transgender, non binario, ecc.)&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb290-7"><a href="wrangling.html#cb290-7" tabindex="-1"></a>      <span class="fu">fct_relevel</span>(<span class="st">&quot;Donna&quot;</span>, <span class="st">&quot;Uomo&quot;</span>, <span class="st">&quot;Altra identità&quot;</span>)</span>
<span id="cb290-8"><a href="wrangling.html#cb290-8" tabindex="-1"></a>  )</span>
<span id="cb290-9"><a href="wrangling.html#cb290-9" tabindex="-1"></a></span>
<span id="cb290-10"><a href="wrangling.html#cb290-10" tabindex="-1"></a><span class="co"># View</span></span>
<span id="cb290-11"><a href="wrangling.html#cb290-11" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb290-12"><a href="wrangling.html#cb290-12" tabindex="-1"></a>  <span class="fu">tabyl</span>(gender)</span></code></pre></div>
<pre><code>##          gender   n percent
##           Donna 522   0.522
##            Uomo 467   0.467
##  Altra identità   3   0.003
##              NR   8   0.008</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="wrangling.html#cb292-1" tabindex="-1"></a><span class="co"># Only keep variables of interest for the following.</span></span>
<span id="cb292-2"><a href="wrangling.html#cb292-2" tabindex="-1"></a><span class="co"># What is this code doing with the age.br variable?</span></span>
<span id="cb292-3"><a href="wrangling.html#cb292-3" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb292-4"><a href="wrangling.html#cb292-4" tabindex="-1"></a>  <span class="fu">select</span>(birth.y, age, gen, <span class="at">age.br =</span> age.br<span class="fl">.2</span>, gender, nato.it, edu, company)</span></code></pre></div>
</div>
<div id="filtering-and-rearranging-cases" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Filtering and rearranging cases<a href="wrangling.html#filtering-and-rearranging-cases" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>The <code>filter()</code> verb.</li>
<li>Filtering cases (i.e., data rows) based on logical conditions with relational operators.</li>
<li>Combining multiple logical conditions via intersection (<code>&amp;</code>) or union (<code>|</code>).</li>
<li>Rearranging data rows.</li>
</ul>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="wrangling.html#cb293-1" tabindex="-1"></a><span class="co"># Respondents whose age is exactly 40.</span></span>
<span id="cb293-2"><a href="wrangling.html#cb293-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb293-3"><a href="wrangling.html#cb293-3" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">==</span> <span class="dv">40</span>)</span></code></pre></div>
<pre><code>## # A tibble: 26 × 8
##    birth.y   age gen         age.br gender nato.it edu         company         
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;       &lt;chr&gt;           
##  1    1983    40 millennials 31-40  Uomo   Sì      Altro       Fix Guru        
##  2    1983    40 millennials 31-40  Uomo   Sì      Superiori   Bloom Marketing 
##  3    1983    40 millennials 31-40  Donna  Sì      Post-laurea Urban Philosophy
##  4    1983    40 millennials 31-40  Donna  Sì      Laurea      Wood Works      
##  5    1983    40 millennials 31-40  Uomo   Sì      Laurea      Office Tile     
##  6    1983    40 millennials 31-40  Uomo   Sì      Laurea      The Spice Route 
##  7    1983    40 millennials 31-40  Uomo   Sì      Superiori   The Zone        
##  8    1983    40 millennials 31-40  Uomo   Sì      Superiori   Coal Kings      
##  9    1983    40 millennials 31-40  Uomo   &lt;NA&gt;    Altro       FruityFlix      
## 10    1983    40 millennials 31-40  Donna  Sì      Superiori   Raven           
## # ℹ 16 more rows</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="wrangling.html#cb295-1" tabindex="-1"></a><span class="co"># With education = Laurea</span></span>
<span id="cb295-2"><a href="wrangling.html#cb295-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb295-3"><a href="wrangling.html#cb295-3" tabindex="-1"></a>  <span class="fu">filter</span>(edu <span class="sc">==</span> <span class="st">&quot;Laurea&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 359 × 8
##    birth.y   age gen          age.br gender nato.it edu    company       
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;  &lt;chr&gt;         
##  1    1968    55 gen x        51-60  Donna  No      Laurea Urban Gallery 
##  2    1961    62 baby boomers 61-70  NR     Sì      Laurea Office Brush  
##  3    1981    42 millennials  41-50  Uomo   Sì      Laurea Satan&#39;s Sister
##  4    1979    44 gen x        41-50  Donna  Sì      Laurea FruityFlix    
##  5    1975    48 gen x        41-50  Donna  Sì      Laurea Coal Kings    
##  6    1978    45 gen x        41-50  Uomo   Sì      Laurea The Auto DNA  
##  7    1972    51 gen x        51-60  Uomo   Sì      Laurea Wood Works    
##  8    1987    36 millennials  31-40  Donna  Sì      Laurea Garden Store  
##  9    1984    39 millennials  31-40  Uomo   Sì      Laurea FruityFlix    
## 10    1981    42 millennials  41-50  Uomo   Sì      Laurea Wood Works    
## # ℹ 349 more rows</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="wrangling.html#cb297-1" tabindex="-1"></a><span class="co"># The %in% operator is useful when you need to select multiple values.</span></span>
<span id="cb297-2"><a href="wrangling.html#cb297-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb297-3"><a href="wrangling.html#cb297-3" tabindex="-1"></a>  <span class="fu">filter</span>(edu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Superiori&quot;</span>, <span class="st">&quot;Laurea&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 775 × 8
##    birth.y   age gen          age.br gender nato.it edu       company       
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;         
##  1    1968    55 gen x        51-60  Donna  No      Laurea    Urban Gallery 
##  2    1969    54 gen x        51-60  Uomo   Sì      Superiori Office Tile   
##  3    1964    59 baby boomers 51-60  Uomo   Sì      Superiori Raven         
##  4    1971    52 gen x        51-60  Uomo   Sì      Superiori Fix Guru      
##  5    1961    62 baby boomers 61-70  NR     Sì      Laurea    Office Brush  
##  6    1981    42 millennials  41-50  Uomo   Sì      Laurea    Satan&#39;s Sister
##  7    1979    44 gen x        41-50  Donna  Sì      Laurea    FruityFlix    
##  8    1971    52 gen x        51-60  Uomo   Sì      Superiori Coal Kings    
##  9    1966    57 gen x        51-60  Uomo   Sì      Superiori Coal Kings    
## 10    1975    48 gen x        41-50  Donna  Sì      Laurea    Coal Kings    
## # ℹ 765 more rows</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="wrangling.html#cb299-1" tabindex="-1"></a><span class="co"># All education categories except &quot;Medie o meno&quot;</span></span>
<span id="cb299-2"><a href="wrangling.html#cb299-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb299-3"><a href="wrangling.html#cb299-3" tabindex="-1"></a>  <span class="fu">filter</span>(edu <span class="sc">!=</span> <span class="st">&quot;Medie o meno&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 977 × 8
##    birth.y   age gen          age.br gender nato.it edu         company         
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;       &lt;chr&gt;           
##  1    1994    29 millennials  21-30  Uomo   Sì      Post-laurea My Vegetarian D…
##  2    1968    55 gen x        51-60  Donna  No      Laurea      Urban Gallery   
##  3    1969    54 gen x        51-60  Uomo   Sì      Superiori   Office Tile     
##  4    1964    59 baby boomers 51-60  Uomo   Sì      Superiori   Raven           
##  5    1971    52 gen x        51-60  Uomo   Sì      Superiori   Fix Guru        
##  6    1961    62 baby boomers 61-70  NR     Sì      Laurea      Office Brush    
##  7    1993    30 millennials  21-30  Donna  Sì      Altro       House Brush     
##  8    1981    42 millennials  41-50  Uomo   Sì      Laurea      Satan&#39;s Sister  
##  9    1979    44 gen x        41-50  Donna  Sì      Laurea      FruityFlix      
## 10    1971    52 gen x        51-60  Uomo   Sì      Superiori   Coal Kings      
## # ℹ 967 more rows</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="wrangling.html#cb301-1" tabindex="-1"></a><span class="co"># Missing value on nato.it</span></span>
<span id="cb301-2"><a href="wrangling.html#cb301-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb301-3"><a href="wrangling.html#cb301-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(nato.it))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 8
##   birth.y   age gen         age.br gender nato.it edu       company        
##     &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;          
## 1    1967    56 gen x       51-60  Donna  &lt;NA&gt;    Superiori Fix Guru       
## 2    1967    56 gen x       51-60  Donna  &lt;NA&gt;    Superiori Bloom Marketing
## 3    1983    40 millennials 31-40  Uomo   &lt;NA&gt;    Altro     FruityFlix     
## 4    1974    49 gen x       41-50  Uomo   &lt;NA&gt;    Superiori Art Fade</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="wrangling.html#cb303-1" tabindex="-1"></a><span class="co"># Multiple conditions can be combined: intersection (&amp;, i.e. AND) or </span></span>
<span id="cb303-2"><a href="wrangling.html#cb303-2" tabindex="-1"></a><span class="co"># union (|, i.e. OR). </span></span>
<span id="cb303-3"><a href="wrangling.html#cb303-3" tabindex="-1"></a></span>
<span id="cb303-4"><a href="wrangling.html#cb303-4" tabindex="-1"></a><span class="co"># Respondents between 30 and 40.</span></span>
<span id="cb303-5"><a href="wrangling.html#cb303-5" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb303-6"><a href="wrangling.html#cb303-6" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span><span class="dv">40</span>)</span></code></pre></div>
<pre><code>## # A tibble: 190 × 8
##    birth.y   age gen         age.br gender nato.it edu         company          
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;       &lt;chr&gt;            
##  1    1993    30 millennials 21-30  Donna  Sì      Altro       House Brush      
##  2    1984    39 millennials 31-40  Uomo   Sì      Superiori   Wood Works       
##  3    1990    33 millennials 31-40  Uomo   Sì      Post-laurea Art Fade         
##  4    1989    34 millennials 31-40  Donna  Sì      Post-laurea The Loop         
##  5    1993    30 millennials 21-30  Donna  Sì      Post-laurea Service Scientist
##  6    1988    35 millennials 31-40  Donna  Sì      Superiori   FruityFlix       
##  7    1987    36 millennials 31-40  Donna  Sì      Laurea      Garden Store     
##  8    1983    40 millennials 31-40  Uomo   Sì      Altro       Fix Guru         
##  9    1984    39 millennials 31-40  Uomo   Sì      Laurea      FruityFlix       
## 10    1988    35 millennials 31-40  NR     Sì      Post-laurea Wood Works       
## # ℹ 180 more rows</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="wrangling.html#cb305-1" tabindex="-1"></a><span class="co"># Respondents who are either younger than 20 or older than 40.</span></span>
<span id="cb305-2"><a href="wrangling.html#cb305-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb305-3"><a href="wrangling.html#cb305-3" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">|</span> age <span class="sc">&gt;</span> <span class="dv">40</span>)</span></code></pre></div>
<pre><code>## # A tibble: 767 × 8
##    birth.y   age gen          age.br gender nato.it edu       company       
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;         
##  1    1968    55 gen x        51-60  Donna  No      Laurea    Urban Gallery 
##  2    1969    54 gen x        51-60  Uomo   Sì      Superiori Office Tile   
##  3    1964    59 baby boomers 51-60  Uomo   Sì      Superiori Raven         
##  4    1971    52 gen x        51-60  Uomo   Sì      Superiori Fix Guru      
##  5    1961    62 baby boomers 61-70  NR     Sì      Laurea    Office Brush  
##  6    1981    42 millennials  41-50  Uomo   Sì      Laurea    Satan&#39;s Sister
##  7    1979    44 gen x        41-50  Donna  Sì      Laurea    FruityFlix    
##  8    1971    52 gen x        51-60  Uomo   Sì      Superiori Coal Kings    
##  9    1966    57 gen x        51-60  Uomo   Sì      Superiori Coal Kings    
## 10    1975    48 gen x        41-50  Donna  Sì      Laurea    Coal Kings    
## # ℹ 757 more rows</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="wrangling.html#cb307-1" tabindex="-1"></a><span class="co"># Respondents who are younger than 40 AND whose education is post-laurea</span></span>
<span id="cb307-2"><a href="wrangling.html#cb307-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb307-3"><a href="wrangling.html#cb307-3" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">40</span> <span class="sc">&amp;</span> edu <span class="sc">==</span> <span class="st">&quot;Post-laurea&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 51 × 8
##    birth.y   age gen         age.br gender nato.it edu         company          
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;       &lt;chr&gt;            
##  1    1994    29 millennials 21-30  Uomo   Sì      Post-laurea My Vegetarian Di…
##  2    1990    33 millennials 31-40  Uomo   Sì      Post-laurea Art Fade         
##  3    1989    34 millennials 31-40  Donna  Sì      Post-laurea The Loop         
##  4    1993    30 millennials 21-30  Donna  Sì      Post-laurea Service Scientist
##  5    1988    35 millennials 31-40  NR     Sì      Post-laurea Wood Works       
##  6    1984    39 millennials 31-40  Donna  Sì      Post-laurea Raven            
##  7    1987    36 millennials 31-40  Donna  Sì      Post-laurea The Zone         
##  8    1985    38 millennials 31-40  Uomo   Sì      Post-laurea Coal Kings       
##  9    1985    38 millennials 31-40  Uomo   Sì      Post-laurea Beep Sports      
## 10    1997    26 gen z       21-30  Donna  No      Post-laurea Satan&#39;s Sister   
## # ℹ 41 more rows</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="wrangling.html#cb309-1" tabindex="-1"></a><span class="co"># The filtered data can be saved to new objects, for example:</span></span>
<span id="cb309-2"><a href="wrangling.html#cb309-2" tabindex="-1"></a>data<span class="fl">.40</span> <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb309-3"><a href="wrangling.html#cb309-3" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;=</span> <span class="dv">40</span>)</span>
<span id="cb309-4"><a href="wrangling.html#cb309-4" tabindex="-1"></a></span>
<span id="cb309-5"><a href="wrangling.html#cb309-5" tabindex="-1"></a><span class="co"># Different dplyr verbs can be combined in a pipe chain:</span></span>
<span id="cb309-6"><a href="wrangling.html#cb309-6" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb309-7"><a href="wrangling.html#cb309-7" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">40</span>) <span class="sc">|&gt;</span> </span>
<span id="cb309-8"><a href="wrangling.html#cb309-8" tabindex="-1"></a>  <span class="fu">select</span>(age, gen, edu)</span></code></pre></div>
<pre><code>## # A tibble: 207 × 3
##      age gen         edu        
##    &lt;dbl&gt; &lt;fct&gt;       &lt;fct&gt;      
##  1    29 millennials Post-laurea
##  2    30 millennials Altro      
##  3    39 millennials Superiori  
##  4    33 millennials Post-laurea
##  5    34 millennials Post-laurea
##  6    30 millennials Post-laurea
##  7    35 millennials Superiori  
##  8    36 millennials Laurea     
##  9    39 millennials Laurea     
## 10    35 millennials Post-laurea
## # ℹ 197 more rows</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="wrangling.html#cb311-1" tabindex="-1"></a><span class="co"># Rearrange rows by increasing values on a variable.</span></span>
<span id="cb311-2"><a href="wrangling.html#cb311-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb311-3"><a href="wrangling.html#cb311-3" tabindex="-1"></a>  <span class="fu">arrange</span>(birth.y)</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 8
##    birth.y   age gen          age.br gender nato.it edu          company        
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;        &lt;chr&gt;          
##  1    1944    79 baby boomers 71-80  Uomo   Sì      Laurea       The Glow Up    
##  2    1954    69 baby boomers 61-70  NR     Sì      Medie o meno Brunchies      
##  3    1958    65 baby boomers 61-70  Uomo   Sì      Laurea       Raven          
##  4    1958    65 baby boomers 61-70  Donna  Sì      Laurea       The Spice Route
##  5    1958    65 baby boomers 61-70  Uomo   Sì      Laurea       The Zone       
##  6    1958    65 baby boomers 61-70  Uomo   Sì      Laurea       Raven          
##  7    1958    65 baby boomers 61-70  Uomo   Sì      Laurea       Evergrow       
##  8    1958    65 baby boomers 61-70  Donna  Sì      Superiori    Coal Kings     
##  9    1958    65 baby boomers 61-70  Uomo   Sì      Altro        Raven          
## 10    1959    64 baby boomers 61-70  Donna  Sì      Laurea       The Zone       
## # ℹ 990 more rows</code></pre>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="wrangling.html#cb313-1" tabindex="-1"></a><span class="co"># By decreasing value:</span></span>
<span id="cb313-2"><a href="wrangling.html#cb313-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb313-3"><a href="wrangling.html#cb313-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(birth.y))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 × 8
##    birth.y   age gen   age.br gender nato.it edu         company             
##      &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;   &lt;fct&gt;       &lt;chr&gt;               
##  1    2002    21 gen z 21-30  Uomo   Sì      Superiori   Fix Guru            
##  2    2000    23 gen z 21-30  Donna  Sì      Laurea      My Plumber          
##  3    2000    23 gen z 21-30  Uomo   Sì      Superiori   Coal Kings          
##  4    2000    23 gen z 21-30  Uomo   Sì      Superiori   Coal Kings          
##  5    2000    23 gen z 21-30  Donna  Sì      Laurea      Beep Sports         
##  6    2000    23 gen z 21-30  Uomo   Sì      Laurea      Raven               
##  7    1998    25 gen z 21-30  Donna  Sì      Laurea      The Fresh Breakfast 
##  8    1998    25 gen z 21-30  Donna  Sì      Laurea      My Vegetarian Dinner
##  9    1997    26 gen z 21-30  Donna  No      Post-laurea Satan&#39;s Sister      
## 10    1997    26 gen z 21-30  Uomo   Sì      Laurea      Art Fade            
## # ℹ 990 more rows</code></pre>
</div>
<div id="saving-the-data" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Saving the data<a href="wrangling.html#saving-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It’s often useful to save the “final” (clean, recoded, etc.) version of your data to an external R file for re-use in other sessions or scripts.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="wrangling.html#cb315-1" tabindex="-1"></a><span class="fu">save</span>(data, <span class="at">file =</span> <span class="st">&quot;my_data.rda&quot;</span>)</span></code></pre></div>
</div>
<div id="describing-or-summarizing-the-data" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Describing or summarizing the data<a href="wrangling.html#describing-or-summarizing-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="with-dplyrsummarize" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> With <code>dplyr::summarize()</code><a href="wrangling.html#with-dplyrsummarize" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The <code>summarize()</code> function takes and applies it to one or multiple variables. We can use existing R functions or any new function we have defined.</li>
<li>Remember what <code>sum()</code> and <code>mean()</code> do to a logical vector. We can use this to calculate absolute or relative frequencies of specific levels (categories) of factors.</li>
</ul>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="wrangling.html#cb316-1" tabindex="-1"></a><span class="co"># Mean of one continuous variable</span></span>
<span id="cb316-2"><a href="wrangling.html#cb316-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb316-3"><a href="wrangling.html#cb316-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg.age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   avg.age
##     &lt;dbl&gt;
## 1    47.6</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="wrangling.html#cb318-1" tabindex="-1"></a><span class="co"># Number of unique or distinct values in edu.</span></span>
<span id="cb318-2"><a href="wrangling.html#cb318-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb318-3"><a href="wrangling.html#cb318-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n.edu =</span> <span class="fu">n_distinct</span>(edu))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   n.edu
##   &lt;int&gt;
## 1     5</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="wrangling.html#cb320-1" tabindex="-1"></a><span class="co"># Absolute frequency of women.</span></span>
<span id="cb320-2"><a href="wrangling.html#cb320-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb320-3"><a href="wrangling.html#cb320-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count.women =</span> <span class="fu">sum</span>(gender <span class="sc">==</span> <span class="st">&quot;Donna&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   count.women
##         &lt;int&gt;
## 1         522</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="wrangling.html#cb322-1" tabindex="-1"></a><span class="co"># We can obtain a battery of multiple summary statistics.</span></span>
<span id="cb322-2"><a href="wrangling.html#cb322-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb322-3"><a href="wrangling.html#cb322-3" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb322-4"><a href="wrangling.html#cb322-4" tabindex="-1"></a>    <span class="at">min.year =</span> <span class="fu">min</span>(birth.y),</span>
<span id="cb322-5"><a href="wrangling.html#cb322-5" tabindex="-1"></a>    <span class="at">avg.age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb322-6"><a href="wrangling.html#cb322-6" tabindex="-1"></a>    <span class="at">sd.age =</span> <span class="fu">sd</span>(age),</span>
<span id="cb322-7"><a href="wrangling.html#cb322-7" tabindex="-1"></a>    <span class="at">count.women =</span> <span class="fu">sum</span>(gender <span class="sc">==</span> <span class="st">&quot;Donna&quot;</span>),</span>
<span id="cb322-8"><a href="wrangling.html#cb322-8" tabindex="-1"></a>    <span class="co"># What am I doing in this last line?</span></span>
<span id="cb322-9"><a href="wrangling.html#cb322-9" tabindex="-1"></a>    <span class="at">prop.foreign =</span> <span class="fu">mean</span>(nato.it <span class="sc">==</span> <span class="st">&quot;No&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb322-10"><a href="wrangling.html#cb322-10" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   min.year avg.age sd.age count.women prop.foreign
##      &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;int&gt;        &lt;dbl&gt;
## 1     1944    47.6   9.39         522       0.0221</code></pre>
</div>
<div id="with-specific-functions-for-descriptive-analysis" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> With specific functions for descriptive analysis<a href="wrangling.html#with-specific-functions-for-descriptive-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>skimr</code> for descriptive statistics on continuous variable</li>
<li><code>janitor</code> for tabulations of categorical variables.</li>
</ul>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="wrangling.html#cb324-1" tabindex="-1"></a><span class="co"># Battery of descriptive statistics on age.</span></span>
<span id="cb324-2"><a href="wrangling.html#cb324-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb324-3"><a href="wrangling.html#cb324-3" tabindex="-1"></a>  skimr<span class="sc">::</span><span class="fu">skim_tee</span>(age)</span></code></pre></div>
<pre><code>## ── Data Summary ────────────────────────
##                            Values
## Name                       data  
## Number of rows             1000  
## Number of columns          8     
## _______________________          
## Column type frequency:           
##   numeric                  1     
## ________________________         
## Group variables            None  
## 
## ── Variable type: numeric ──────────────────────────────────────────────────────
##   skim_variable n_missing complete_rate mean   sd p0  p25 p50 p75 p100 hist 
## 1 age                   0             1 47.6 9.39 21 41.8  49  55   79 ▂▅▇▅▁</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="wrangling.html#cb326-1" tabindex="-1"></a><span class="co"># Tabulation for gender</span></span>
<span id="cb326-2"><a href="wrangling.html#cb326-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb326-3"><a href="wrangling.html#cb326-3" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(gender)</span></code></pre></div>
<pre><code>##          gender   n percent
##           Donna 522   0.522
##            Uomo 467   0.467
##  Altra identità   3   0.003
##              NR   8   0.008</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="wrangling.html#cb328-1" tabindex="-1"></a><span class="co"># Note that count() gives us similar information.</span></span>
<span id="cb328-2"><a href="wrangling.html#cb328-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb328-3"><a href="wrangling.html#cb328-3" tabindex="-1"></a>  <span class="fu">count</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   gender             n
##   &lt;fct&gt;          &lt;int&gt;
## 1 Donna            522
## 2 Uomo             467
## 3 Altra identità     3
## 4 NR                 8</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="wrangling.html#cb330-1" tabindex="-1"></a><span class="co"># Cross-tabulation for education and gender</span></span>
<span id="cb330-2"><a href="wrangling.html#cb330-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb330-3"><a href="wrangling.html#cb330-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(edu, gender)</span></code></pre></div>
<pre><code>##           edu Donna Uomo Altra identità NR
##  Medie o meno     5   15              0  3
##     Superiori   196  218              1  1
##        Laurea   207  150              0  2
##   Post-laurea    85   57              1  1
##         Altro    29   27              1  1</code></pre>
<ul>
<li><code>janitor</code> offers different ways of customizing tabulations.</li>
</ul>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="wrangling.html#cb332-1" tabindex="-1"></a><span class="co"># Add column totals.</span></span>
<span id="cb332-2"><a href="wrangling.html#cb332-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb332-3"><a href="wrangling.html#cb332-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb332-4"><a href="wrangling.html#cb332-4" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>)</span></code></pre></div>
<pre><code>##          gender    n percent
##           Donna  522   0.522
##            Uomo  467   0.467
##  Altra identità    3   0.003
##              NR    8   0.008
##           Total 1000   1.000</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="wrangling.html#cb334-1" tabindex="-1"></a><span class="co"># Format percentage</span></span>
<span id="cb334-2"><a href="wrangling.html#cb334-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb334-3"><a href="wrangling.html#cb334-3" tabindex="-1"></a>  <span class="fu">tabyl</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb334-4"><a href="wrangling.html#cb334-4" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb334-5"><a href="wrangling.html#cb334-5" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>()</span></code></pre></div>
<pre><code>##          gender    n percent
##           Donna  522   52.2%
##            Uomo  467   46.7%
##  Altra identità    3    0.3%
##              NR    8    0.8%
##           Total 1000  100.0%</code></pre>
<ul>
<li>Note that both <code>skimr</code> and <code>janitor</code> output objects can be converted to tibbles for further manipulation.</li>
</ul>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="wrangling.html#cb336-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb336-2"><a href="wrangling.html#cb336-2" tabindex="-1"></a>  skimr<span class="sc">::</span><span class="fu">skim</span>(age) <span class="sc">|&gt;</span> </span>
<span id="cb336-3"><a href="wrangling.html#cb336-3" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb336-4"><a href="wrangling.html#cb336-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">variable =</span> skim_variable, <span class="at">mean =</span> numeric.mean, <span class="at">sd =</span> numeric.sd)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   variable  mean    sd
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 age       47.6  9.39</code></pre>
</div>
<div id="descriptive-statistics-by-group" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Descriptive statistics by group<a href="wrangling.html#descriptive-statistics-by-group" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The <code>group_by()</code> function allows us to run any descriptive analysis by data subsets.</li>
<li>These subsets may come from the categories of a single factor or a combination of categories from multiple factors.</li>
<li>Both <code>summarize()</code> and <code>skimr</code> are compatible with <code>group_by()</code></li>
</ul>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="wrangling.html#cb338-1" tabindex="-1"></a><span class="co"># Let&#39;s run summarize() as above, but now by gender. What are the results telling us?</span></span>
<span id="cb338-2"><a href="wrangling.html#cb338-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb338-3"><a href="wrangling.html#cb338-3" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb338-4"><a href="wrangling.html#cb338-4" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb338-5"><a href="wrangling.html#cb338-5" tabindex="-1"></a>    <span class="at">min.year =</span> <span class="fu">min</span>(birth.y),</span>
<span id="cb338-6"><a href="wrangling.html#cb338-6" tabindex="-1"></a>    <span class="at">avg.age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb338-7"><a href="wrangling.html#cb338-7" tabindex="-1"></a>    <span class="at">sd.age =</span> <span class="fu">sd</span>(age),</span>
<span id="cb338-8"><a href="wrangling.html#cb338-8" tabindex="-1"></a>    <span class="at">prop.foreign =</span> <span class="fu">mean</span>(nato.it <span class="sc">==</span> <span class="st">&quot;No&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb338-9"><a href="wrangling.html#cb338-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   gender         min.year avg.age sd.age prop.foreign
##   &lt;fct&gt;             &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;
## 1 Donna              1958    46.7   9.07       0.025 
## 2 Uomo               1944    48.6   9.64       0.0194
## 3 Altra identità     1964    48     9.64       0     
## 4 NR                 1954    50.6  11.1        0</code></pre>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="wrangling.html#cb340-1" tabindex="-1"></a><span class="co"># Average age in each company</span></span>
<span id="cb340-2"><a href="wrangling.html#cb340-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb340-3"><a href="wrangling.html#cb340-3" tabindex="-1"></a>  <span class="fu">group_by</span>(company) <span class="sc">|&gt;</span> </span>
<span id="cb340-4"><a href="wrangling.html#cb340-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg.age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 53 × 2
##    company            avg.age
##    &lt;chr&gt;                &lt;dbl&gt;
##  1 Active Body           48.1
##  2 Art Fade              44.2
##  3 Bean Morning          50.1
##  4 Beep Sports           43.1
##  5 Bloom Marketing       47.2
##  6 Brew Bean             35  
##  7 Brunchies             69  
##  8 Clean Scissor         46  
##  9 Coal Kings            52.3
## 10 Death By Milkshake    43.8
## # ℹ 43 more rows</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="wrangling.html#cb342-1" tabindex="-1"></a><span class="co"># Let&#39;s now only keep Donna and Uomo as gender, and re-run by groups given by </span></span>
<span id="cb342-2"><a href="wrangling.html#cb342-2" tabindex="-1"></a><span class="co"># combinations of gender and education categories.</span></span>
<span id="cb342-3"><a href="wrangling.html#cb342-3" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb342-4"><a href="wrangling.html#cb342-4" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Donna&quot;</span>, <span class="st">&quot;Uomo&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb342-5"><a href="wrangling.html#cb342-5" tabindex="-1"></a>  <span class="fu">group_by</span>(gender, edu) <span class="sc">|&gt;</span> </span>
<span id="cb342-6"><a href="wrangling.html#cb342-6" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb342-7"><a href="wrangling.html#cb342-7" tabindex="-1"></a>    <span class="at">min.year =</span> <span class="fu">min</span>(birth.y),</span>
<span id="cb342-8"><a href="wrangling.html#cb342-8" tabindex="-1"></a>    <span class="at">avg.age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb342-9"><a href="wrangling.html#cb342-9" tabindex="-1"></a>    <span class="at">sd.age =</span> <span class="fu">sd</span>(age),</span>
<span id="cb342-10"><a href="wrangling.html#cb342-10" tabindex="-1"></a>    <span class="at">prop.foreign =</span> <span class="fu">mean</span>(nato.it <span class="sc">==</span> <span class="st">&quot;No&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb342-11"><a href="wrangling.html#cb342-11" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;gender&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 10 × 6
## # Groups:   gender [2]
##    gender edu          min.year avg.age sd.age prop.foreign
##    &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;
##  1 Donna  Medie o meno     1960    53.6   7.80      0      
##  2 Donna  Superiori        1958    50.1   7.13      0.0206 
##  3 Donna  Laurea           1958    44.9   9.81      0.0290 
##  4 Donna  Post-laurea      1963    43.3   8.63      0.0353 
##  5 Donna  Altro            1964    45.7   9.06      0      
##  6 Uomo   Medie o meno     1964    52.9   4.89      0.0667 
##  7 Uomo   Superiori        1959    51.7   8.19      0.0276 
##  8 Uomo   Laurea           1944    45.1  10.2       0.00667
##  9 Uomo   Post-laurea      1963    43     9.24      0.0175 
## 10 Uomo   Altro            1958    52.6   7.83      0</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="wrangling.html#cb345-1" tabindex="-1"></a><span class="co"># skimr functions are also compatible with group_by().</span></span>
<span id="cb345-2"><a href="wrangling.html#cb345-2" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb345-3"><a href="wrangling.html#cb345-3" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb345-4"><a href="wrangling.html#cb345-4" tabindex="-1"></a>  <span class="fu">skim_tee</span>(age)</span></code></pre></div>
<pre><code>## ── Data Summary ────────────────────────
##                            Values
## Name                       data  
## Number of rows             1000  
## Number of columns          8     
## _______________________          
## Column type frequency:           
##   numeric                  1     
## ________________________         
## Group variables            gender
## 
## ── Variable type: numeric ──────────────────────────────────────────────────────
##   skim_variable gender         n_missing complete_rate mean    sd p0  p25 p50
## 1 age           Donna                  0             1 46.7  9.07 23 41    48
## 2 age           Uomo                   0             1 48.6  9.64 21 42    51
## 3 age           Altra identità         0             1 48    9.64 41 42.5  44
## 4 age           NR                     0             1 50.6 11.1  35 44    49
##    p75 p100 hist 
## 1 54     65 ▂▃▇▇▃
## 2 56     79 ▂▆▇▆▁
## 3 51.5   59 ▇▁▁▁▃
## 4 56.8   69 ▇▇▇▃▃</code></pre>
</div>
<div id="export-results" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Export results<a href="wrangling.html#export-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Descriptive results from <code>summarize()</code>, <code>skimr</code> or <code>janitor</code> can be exported to external file (e.g., csv). In a later session we’ll see how to directly output them into a report (e.g. in html or pdf).</li>
</ul>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="wrangling.html#cb347-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb347-2"><a href="wrangling.html#cb347-2" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Donna&quot;</span>, <span class="st">&quot;Uomo&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb347-3"><a href="wrangling.html#cb347-3" tabindex="-1"></a>  <span class="fu">group_by</span>(gender, edu) <span class="sc">|&gt;</span> </span>
<span id="cb347-4"><a href="wrangling.html#cb347-4" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb347-5"><a href="wrangling.html#cb347-5" tabindex="-1"></a>    <span class="at">min.year =</span> <span class="fu">min</span>(birth.y),</span>
<span id="cb347-6"><a href="wrangling.html#cb347-6" tabindex="-1"></a>    <span class="at">avg.age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb347-7"><a href="wrangling.html#cb347-7" tabindex="-1"></a>    <span class="at">sd.age =</span> <span class="fu">sd</span>(age),</span>
<span id="cb347-8"><a href="wrangling.html#cb347-8" tabindex="-1"></a>    <span class="at">prop.foreign =</span> <span class="fu">mean</span>(nato.it <span class="sc">==</span> <span class="st">&quot;No&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb347-9"><a href="wrangling.html#cb347-9" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb347-10"><a href="wrangling.html#cb347-10" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">&quot;summarize_by_gender-edu.csv&quot;</span>)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;gender&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="wrangling.html#cb349-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb349-2"><a href="wrangling.html#cb349-2" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb349-3"><a href="wrangling.html#cb349-3" tabindex="-1"></a>  <span class="fu">skim</span>(age) <span class="sc">|&gt;</span> </span>
<span id="cb349-4"><a href="wrangling.html#cb349-4" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb349-5"><a href="wrangling.html#cb349-5" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">&quot;skim_by_gender.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R for social research and business analytics.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
